---
layout: post
title: "[Youtube] Youtube Player API - 1"
comments: false
categories: [youtube]
tags: [youtube, ytplayer, ytplayer API]
date: "2021-03-05"
image: youtube
---

# ğŸ¬ Youtube Player APIë€?
> ì›¹ ì‚¬ì´íŠ¸ì— Youtube ë™ì˜ìƒ í”Œë ˆì´ì–´ë¥¼ ë Œë”ë§í•˜ë©° Javascriptë¥¼ ì‚¬ìš©í•˜ì—¬ ì œì–´í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” API  
  ì¤„ì—¬ì„œ YT.playerë¼ê³ ë„ í•©ë‹ˆë‹¤.

<br>

í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ `<video>` íƒœê·¸ê°€ ì•„ë‹Œ Youtube ë™ì˜ìƒì„ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°ê°€ ë§ë‹¤.  
ì´ëŸ° ê²½ìš° í•´ë‹¹ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬ìƒ, ì¼ì‹œì •ì§€ ë“± **ë‹¤ì–‘í•œ ì»¨íŠ¸ë¡¤**ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—, ì†Œê°œí•´ë³´ë ¤ í•©ë‹ˆë‹¤ ã…ã…


# ğŸ¬ Youtubeë¥¼ ë Œë”ë§í•˜ëŠ” ë°©ë²•
Youtube ë™ì˜ìƒì„ ë Œë”ë§í•˜ëŠ” ë°©ë²•ì€ ì´ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.    
ì•„ë˜ ë‘ê°€ì§€ ëª¨ë‘ë¥¼ ì†Œê°œí•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤~

## 1ï¸âƒ£`<iframe>` íƒœê·¸ ì‚¬ìš©í•˜ê¸°

### ì‚¬ìš© ë°©ë²• 

```html
// videoIdëŠ” loadí•  ì˜ìƒì˜ idê°’
<iframe src="https://www.youtube.com/embed/VIDEO_ID"></iframe>
```

### íŠ¹ì§•
1. ì§ì ‘ APIë¥¼ ì—°ê²°í•˜ì§€ ì•Šê³ , postMessageë¥¼ í†µí•˜ì—¬ ì»¨íŠ¸ë¡¤í•©ë‹ˆë‹¤.
2. ì œì–´í•˜ê¸° ìœ„í•´ì„  ì•„ë˜ ì†ì„±ê°’ì´ í•„ìˆ˜
```javascript
// enablejsapiì€ IFrame ë˜ëŠ” JavaScript Player API í˜¸ì¶œ
// allow="autoplay;"ëŠ” jacascriptë¡œ ì œì–´ì‹œ ì¬ìƒí•  ìˆ˜ ìˆë„ë¡ í—ˆìš©
<iframe src="https://www.youtube.com/embed/VIDEO_ID?enablejsapi=1" allow="autoplay;"></iframe>
```
3. Javascriptë¡œ ì œì–´í•˜ê¸° ìœ„í•´ì„  ì•„ë˜ì™€ ê°™ì€ callPlayer í•¨ìˆ˜ í•„ìš”í•©ë‹ˆë‹¤.
```javascript
function callPlayer(frame_id, func, args) {
        // jqueryë¥¼ ì‚¬ìš©í•  ë•Œ
        if (window.jQuery && frame_id instanceof jQuery) frame_id = frame_id.get(0).id;

        const iframe = document.getElementById(frame_id);

        //íƒœê·¸ì˜ ê°’ì´ iframeì´ ì•„ë‹ ê²½ìš° iframeìœ¼ë¡œ ë³€ê²½
        if (iframe && iframe.tagName.toUpperCase() != "IFRAME") {
            iframe = iframe.getElementsByTagName("iframe")[0];
        }

        if (iframe) {
            iframe.contentWindow.postMessage(JSON.stringify({
            event: "command",
            func: func,
            args: args || [],
            id: frame_id
            }), "*");
        }
}
```

### window.postMessage 
***iframeì´ë€***
> Inline Frameì˜ ì•½ìë¡œ, í˜„ì¬ ë¬¸ì„œ ì•ˆì— ë‹¤ë¥¸ HTML í˜ì´ì§€ë¥¼ ì‚½ì…í•˜ëŠ” ìš”ì†Œ
- window.postMessageë¥¼ ì´ìš©í•˜ë©´ iframe ì•ˆì˜ HTML í˜ì´ì§€ì™€ ë©”ì„¸ì§€ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (í†µì‹ ì´ ê°€ëŠ¥í•´ì§)

```javascript
targetWindow.postMessage(message, targetOrigin);
```
1. **targetWindow** : ë©”ì„¸ì§€ë¥¼ ì „ë‹¬ ë°›ì„ windowì˜ ì°¸ì¡° (postMessageë¥¼ ë³´ë‚¼ ëŒ€ìƒ)
2. **message** : **targetWindow**ì— ë³´ë‚´ì§ˆ ë°ì´í„°ë¡œ Stringìœ¼ë¡œ í•œì • 
3. **targetOrigin** :  ë©”ì„¸ì§€ë¥¼ ì „ì†¡ë°›ì„ ëŒ€ìƒì˜ ë„ë©”ì¸, ,íŠ¹ì • ë„ë©”ì¸ì´ ì•„ë‹ˆë¼ë©´ *ë¡œ ì§€ì •


<br>
<br>

## 2ï¸âƒ£ Youtube Player API ì‚¬ìš©
### ì‚¬ìš© ë°©ë²•
```html
<div id="ytplayer"></div>
```
```javascript
//Iframe Player APIë¥¼ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ load
var tag = document.createElement('script');        
tag.src = "https://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;

//Iframe Player APIê°€ loadëœ í›„ ì‹¤í–‰
function onYouTubePlayerAPIReady() {
		//ytplayerëŠ” id ê°’ì„ ì˜ë¯¸
    player = new YT.Player('ytplayer', {
				//videoIdëŠ” loadí•  ì˜ìƒì˜ idê°’
        videoId: 'ZqdCFnEsEVU',                
    });
}

```

### íŠ¹ì§•
1. div íƒœê·¸ëŠ” youtube ë™ì˜ìƒ í”Œë ˆì´ì–´ê°€ ì‚½ì…ë  ìœ„ì¹˜ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.
2. APIëŠ” div íƒœê·¸ë¥¼ iframe íƒœê·¸ë¡œ ëŒ€ì²´í•˜ë©° ë˜ëŠ” ì§ì ‘ iframe ìš”ì†Œë¥¼ ì‚½ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# ğŸ¬ 2ê°€ì§€ ë°©ë²• ë¹„êµ
## 1. ì†ë„
ê°œë°œìë„êµ¬ì˜ Networkì—ì„œ **Slow 3G** í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì•˜ì„ ë•Œ

![ì†ë„ ë¹„êµ](/posts/youtube/youtube1.png)

ì²«ë²ˆì§¸ëŠ” `<iframe>` íƒœê·¸ ë‘ë²ˆì§¸ëŠ” IFrame Player APIì„ ì‚¬ìš©í•œ ê²ƒìœ¼ë¡œ ë¡œë”© ì†ë„ëŠ” ê°™ìŠµë‹ˆë‹¤.


<br><br><br>

> <subtitle>reference</subtitle>

-   <https://edu.goorm.io/learn/lecture/16422/%EA%B0%80%EC%9E%A5-%ED%95%AB%ED%95%9C-fe-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-react-%EA%B0%80%qweddEC%A7%80%EA%B3%A0-%EB%86%80%EC%95%84%EB%B3%B4%EA%B8%B0/>
-   <ë¦¬ì•¡íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ  - ê¸¸ë²—>
